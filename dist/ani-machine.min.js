/**
 * ani-machine - Declarative animation and machine state
 * @version v0.1.10
 * @link https://github.com/jfroffice/ani-machine
 * @license MIT
 */
!(function(e) {
  "use strict";
  function t(e, t) {
    var i = n(e, t) ? a : r;
    i(e, t);
  }
  var n = function(e, t) {
      return e.classList.contains(t);
    },
    r = function(e, t) {
      e.classList.add(t);
    },
    a = function(e, t) {
      e.classList.remove(t);
    },
    i = {
      hasClass: n,
      addClass: r,
      removeClass: a,
      toggleClass: t,
      has: n,
      add: r,
      remove: a,
      toggle: t
    };
  "function" == typeof define && define.amd ? define(i) : (e.classie = i);
})(window);
var events = (function() {
    function e(e) {
      e.eventTypes.forEach(function(t) {
        e.element.removeEventListener(t, e.callback);
      });
    }
    function t(e, t, n, r) {
      var a;
      return (
        3 == arguments.length && ((r = n), (n = t), (t = void 0)),
        t
          ? ((t += "," + t + " *"),
            (a = function(n) {
              var a = n.target;
              a.matches &&
                a.matches(t) &&
                (r.handleEvent ? r.handleEvent(n) : r.call(e, n));
            }))
          : (a = r),
        "string" == typeof n && (n = n.split(/[\s,]+/)),
        n.forEach(function(t) {
          e.addEventListener(t, a);
        }),
        { element: e, eventTypes: n, callback: a }
      );
    }
    function n(n, r, a, i) {
      function s(t) {
        e(o), i.handleEvent ? i.handleEvent(t) : i.call(n, t);
      }
      var o;
      3 == arguments.length && ((i = a), (a = r), (r = void 0)),
        (o = t(n, r, a, s));
    }
    return { one: n, on: t, off: e };
  })(),
  am = {};
(am.prefix = (function() {
  "use strict";
  function e(e) {
    var t = document.body || document.documentElement,
      n = t.style,
      r = ["Moz", "Webkit", "Khtml", "O", "ms"],
      a = e;
    if ("string" == typeof n[a]) return e;
    a = a.charAt(0).toUpperCase() + a.substr(1);
    for (var i = 0; i < r.length; i++)
      if ("string" == typeof n[r[i] + a]) return r[i] + a;
    return !1;
  }
  var t = {
      WebkitAnimation: "webkitAnimationEnd",
      OAnimation: "oAnimationEnd",
      msAnimation: "MSAnimationEnd",
      animation: "animationend"
    },
    n = {
      WebkitTransition: "webkitTransitionEnd",
      OTransition: "oTransitionEnd",
      msTransition: "MSTransitionEnd",
      transition: "transitionend"
    };
  return {
    TRANSITION_END_EVENT: n[e("transition")],
    ANIMATION_END_EVENT: t[e("animation")]
  };
})()),
  (am.viewport = (function() {
    "use strict";
    function e(e) {
      var t = 0,
        n = 0;
      do
        isNaN(e.offsetTop) || (t += e.offsetTop),
          isNaN(e.offsetLeft) || (n += e.offsetLeft);
      while ((e = e.offsetParent));
      return { top: t, left: n };
    }
    function t() {
      var e = window.document.documentElement.clientHeight,
        t = window.innerHeight;
      return t > e ? t : e;
    }
    return {
      isInside: function(n, r) {
        var a = window.pageYOffset,
          i = a + t(),
          s = n.offsetHeight,
          o = e(n).top,
          c = o + s;
        return (
          (r = r || 0.5),
          (i >= o + s * r && c >= a) ||
            "fixed" ==
              (n.currentStyle
                ? n.currentStyle
                : window.getComputedStyle(n, null)
              ).position
        );
      }
    };
  })()),
  (am.styles = (function() {
    "use strict";
    function e(e, n) {
      return t[e] ? void 0 : "." + e + "{" + n + "}";
    }
    var t = {};
    return function(n, r) {
      var a = e(n, r);
      if (!a) return n;
      var i = document.createElement("style");
      return (
        (i.type = "text/css"),
        (i.innerHTML = a),
        (t[n] = !0),
        document.getElementsByTagName("head")[0].appendChild(i),
        n
      );
    };
  })()),
  (am.frame = (function() {
    var e =
      window.requestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      function(e) {
        window.setTimeout(e, 1e3 / 60);
      };
    return function(t) {
      e.call(window, t);
    };
  })()),
  (am.translate = (function(e, t) {
    "use strict";
    return function(n) {
      var r,
        a = "translate",
        i = a + n.axis + "(" + n.move + ")",
        s = n.scale,
        o = "";
      return (
        s !== t &&
          ((i += " scale(" + s.value + ")"),
          (o += ("_scale" + s.value).replace(".", "_"))),
        (r = "-webkit-transform: " + i + ";transform: " + i + ";"),
        n.opacity !== t && (r += " opacity: " + (n.opacity ? "1" : "0") + ";"),
        (o += a + n.axis + "_" + n.move + "_" + n.opacity),
        e(o.replace(/-/g, "m"), r)
      );
    };
  })(am.styles)),
  (am.transition = (function(e) {
    "use strict";
    return function(t, n, r) {
      var a = t + " " + n + " " + r,
        i = a + ", all " + a + ";",
        s = "_" + a.replace(/ /g, "_").replace(/\./g, "_"),
        o =
          "-webkit-transition: -webkit-transform " +
          i +
          "transition: transform " +
          i;
      return e(s, o);
    };
  })(am.styles)),
  (am.enter = (function(e, t) {
    "use strict";
    function n(e) {
      var t,
        n = {};
      return (
        e.forEach(function(r, a) {
          switch (((t = e[a + 1]), r)) {
            case ":enter":
              return (
                (n.enter = t),
                void (n.axis =
                  "top" === n.enter || "bottom" === n.enter ? "y" : "x")
              );
            case "move":
              return void (n.move = t);
            case "after":
            case "wait":
              return void (n.after = t);
            case "over":
              return void (n.over = t);
            case "easing":
              return void (n.easing = t);
            case "scale":
              if (
                ((n.scale = {}),
                "up" == t || "down" == t
                  ? ((n.scale.direction = t), (n.scale.power = e[a + 2]))
                  : (n.scale.power = t),
                0 != parseInt(n.scale.power))
              ) {
                var i = 0.01 * parseFloat(n.scale.power);
                "up" == n.scale.direction && (i = -i), (n.scale.value = 1 + i);
              }
              return;
            default:
              return;
          }
        }),
        n
      );
    }
    return function(r) {
      var a = n(r),
        i = a.enter || "left",
        s = "left" !== i && "top" !== i ? a.move : "-" + a.move,
        o = a.over || "0.7s",
        c = a.after || "0s",
        u = a.easing || "ease-in-out";
      return {
        initial: e({ axis: a.axis, move: s, scale: a.scale, opacity: !1 }),
        transition: t(o, u, c)
      };
    };
  })(am.translate, am.transition)),
  (am.transform = (function(e, t) {
    "use strict";
    function n(e) {
      var t,
        n,
        r = {};
      return (
        e.forEach(function(a, i) {
          if (n) return void (n = !1);
          switch (((t = e[i + 1]), a)) {
            case "twist":
              return (
                "left" === t
                  ? (r.skewx = e[i + 2])
                  : "right" === t && (r.skewx = "-" + e[i + 2]),
                void (n = !0)
              );
            case "rotate":
              return (
                "left" === t
                  ? (r.rotatey = "-" + e[i + 2])
                  : "right" === t && (r.rotatey = e[i + 2]),
                void (n = !0)
              );
            case "move":
              var s = e[i + 2];
              return (
                "left" === t
                  ? (r.translatex = "-" + s)
                  : "right" === t
                    ? (r.translatex = s)
                    : "bottom" === t
                      ? (r.translatey = s)
                      : "top" === t && (r.translatey = "-" + s),
                void (n = !0)
              );
            case "scale":
              if (
                ((r.scale = {}),
                "up" == t || "down" == t
                  ? ((r.scale.direction = t), (r.scale.power = e[i + 2]))
                  : (r.scale.power = t),
                0 != parseInt(r.scale.power))
              ) {
                var o = 0.01 * parseFloat(r.scale.power);
                "up" == r.scale.direction && (o = -o), (r.scale.value = 1 + o);
              }
              return;
            case "after":
            case "wait":
              return void (r.after = t);
            case "over":
              return void (r.over = t);
            default:
              return;
          }
        }),
        r
      );
    }
    return function(r) {
      var a = n(r),
        i = a.skewx,
        s = a.skewy,
        o = a.rotatey,
        c = a.translatex,
        u = a.translatey,
        f = a.scale,
        l = a.over || "1.0s",
        m = a.after || "0s",
        d = a.easing || "ease-in-out",
        v = "",
        p = "";
      i && ((p += "skewx(" + i + ") "), (v += "skewx" + i)),
        s && ((p += "skewy(" + s + ") "), (v += "skewy" + s)),
        c && ((p += "translatex(" + c + ")"), (v += "translatex" + c)),
        u && ((p += "translatey(" + u + ")"), (v += "translatey" + u)),
        o && ((p += "rotate(" + o + ") "), (v += "rotate" + o)),
        f &&
          ((p += " scale(" + f.value + ")"),
          (v += "scale" + f.value.toString().replace(".", "_")));
      var g =
        "-webkit-transform: " +
        p +
        " translateZ(0);transform: " +
        p +
        " translateZ(0);";
      return (
        (v = v.replace(/-/g, "m")),
        { target: e(v, g), reset: !0, transition: t(l, d, m) }
      );
    };
  })(am.styles, am.transition)),
  (function(e, t) {
    "function" == typeof define && define.amd
      ? define(t)
      : "object" == typeof exports
        ? (module.exports = t(require, exports, module))
        : (e.parser = t());
  })(this, function() {
    function e(e) {
      return e.replace(/((\s*\S+)*)\s*/, "$1");
    }
    function t(t, n) {
      return e(n.substring(t.length + 1, n.length));
    }
    function n(n) {
      var r,
        a = [];
      return (
        -1 === n.indexOf(":on active") && (n = ":on active " + n),
        n.split(":o").forEach(function(n) {
          n.length &&
            ((r = {}),
            n.split(":").forEach(function(n) {
              0 === n.indexOf("n")
                ? (r.on = e(n.substring(2, n.length)))
                : 0 === n.indexOf("enter") ||
                  0 === n.indexOf("transform") ||
                  0 === n.indexOf("animate") ||
                  0 === n.indexOf("shake")
                  ? (r.do = ":" + e(n))
                  : 0 === n.indexOf("go")
                    ? (r.go = e(n.substring(3, n.length)))
                    : 0 === n.indexOf("transform")
                      ? (r.transform = t("transform", n))
                      : 0 === n.indexOf("before")
                        ? (r.before = e(n.substring(7, n.length)).replace(
                            "()",
                            ""
                          ))
                        : 0 === n.indexOf("after")
                          ? (r.after = e(n.substring(6, n.length)).replace(
                              "()",
                              ""
                            ))
                          : 0 === n.indexOf("wait")
                            ? (r.wait =
                                1e3 *
                                +e(n.substring(5, n.length)).replace("s", ""))
                            : 0 === n.indexOf("loop") &&
                              (r.loop = e(n.substring(5, n.length)));
            }),
            a.push(r));
        }),
        a
      );
    }
    return {
      getStates: function(e, t, r) {
        return (e = e || {}), (e[t] = n(r)), e;
      },
      getTriggers: function(t, n, r) {
        var t = t || {},
          a = r.indexOf(":trigger");
        return -1 !== a && (t[n] = e(r.substring(a + 9, r.length))), t;
      }
    };
  }),
  (am.build = (function(e, t, n) {
    "use strict";
    function r(e) {
      getComputedStyle(e, null).display;
    }
    function a(t, n, a, i, s) {
      r(t), a && classie.add(t, a);
      var o = t.getAttribute("data-previous-target");
      classie.has(t, o) && classie.remove(t, o),
        classie.add(t, i),
        n && classie.remove(t, n),
        events.one(t, e.TRANSITION_END_EVENT, function() {
          classie.remove(t, i),
            a && t.setAttribute("data-previous-target", a),
            s && s();
        });
    }
    return function(i, s, o, c) {
      var u;
      return ":enter" === s
        ? function(e) {
            (u = t(o)),
              classie.add(i, u.initial),
              a(i, u.initial, null, u.transition, function() {
                e && e();
              });
          }
        : ":transform" === s
          ? function(e) {
              (u = n(o)),
                a(i, null, u.target, u.transition, function() {
                  e && e();
                });
            }
          : ":shake" === s
            ? function(t) {
                r(i),
                  classie.add(i, "shake"),
                  classie.add(i, "shake-constant"),
                  o[1] && classie.add(i, "shake-" + o[1]),
                  events.one(i, e.ANIMATION_END_EVENT, function() {
                    classie.remove(i, "shake"),
                      classie.remove(i, "shake-constant"),
                      o[1] && classie.remove(i, "shake-" + o[1]),
                      t && t();
                  });
              }
            : ":animate" === s
              ? function(t) {
                  var n = o + " animated";
                  c && (n += " loop" + c),
                    r(i),
                    classie.add(i, o),
                    classie.add(i, "animated"),
                    events.one(i, e.ANIMATION_END_EVENT, function() {
                      classie.remove(i, o),
                        classie.remove(i, "animated"),
                        t && t();
                    });
                }
              : function() {
                  alert("ERROR " + s);
                };
    };
  })(am.prefix, am.enter, am.transform)),
  (am.sequencer = (function(e) {
    "use strict";
    function t(e) {
      return (
        "enter" === e
          ? (e = "mouseenter")
          : "leave" === e && (e = "mouseleave"),
        e
      );
    }
    return {
      getState: function() {
        return this.currentState;
      },
      init: function(e) {
        function n(e, n) {
          var a = n.split(" "),
            i = a[0],
            s = t(a[1]);
          [].forEach.call(document.querySelectorAll(i), function(t) {
            events.on(t, s, function() {
              r.changeState(e, !0);
            });
          });
        }
        var r = this,
          a = e.triggers;
        (r.states = e.states),
          (r.element = e.element),
          (r.jobs = []),
          (r.offs = []),
          r.currentState,
          r.running;
        for (var i in a) {
          var s = a[i];
          s && n(i, s);
        }
        return r.changeState("default"), r;
      },
      changeState: function(n, r) {
        function a(e) {
          u.jobs.push(e), i();
        }
        function i() {
          if (!u.running) {
            var e = u.jobs[0];
            e &&
              ((u.running = !0),
              e.run(function() {
                e.finish(), u.jobs.splice(0, 1), (u.running = !1), i();
              }));
          }
        }
        function s(e) {
          if (e) {
            var t = [];
            for (var n in e) t.push(c(e[n]));
            return t;
          }
        }
        function o(e) {
          (e = window[e]), "function" == typeof e && e.apply(null, [u.element]);
        }
        function c(n) {
          function r() {
            if ((d && o(d), !h)) return void i();
            var e = h.split(" "),
              t = e[0];
            e &&
              (":animate" === t
                ? ((n.currentStep += 1),
                  n.currentStep >= e.length
                    ? console.warn(
                        "try to relaunch animation that is not finished"
                      )
                    : a({
                        run: am.build(u.element, t, e[n.currentStep], g),
                        finish: c
                      }))
                : a({ run: am.build(u.element, t, e), finish: s }));
          }
          function i() {
            m && (w !== f && events.off(l), u.changeState(m));
          }
          function s() {
            i(), v && o(v);
          }
          function c() {
            n.currentStep < h.split(" ").length - 1
              ? e(r)
              : (n.currentStep = 0),
              s();
          }
          var l,
            m = n.go,
            d = n.before,
            v = n.after,
            p = n.wait,
            g = n.loop,
            h = n.do,
            w = t(n.on);
          return (
            (n.currentStep = n.currentStep || 0),
            w === f
              ? p
                ? setTimeout(function() {
                    e(r);
                  }, p)
                : e(r)
              : (l = events.on(u.element, w, r)),
            function() {
              l && events.off(l);
            }
          );
        }
        var u = this,
          f = "active",
          l = u.currentState === n;
        u.currentState &&
          u.offs &&
          !l &&
          u.offs.forEach(function(e) {
            e();
          }),
          (!l || r) && ((u.currentState = n), (u.offs = s(u.states[n])));
      }
    };
  })(am.frame)),
  (am.start = (function(e, t) {
    "use strict";
    function n() {
      r && clearTimeout(r),
        (r = setTimeout(function() {
          (r = null),
            (function() {
              s.forEach(function(e) {
                (e.states.enter || e.states.leave) &&
                  e.changeState(t.isInside(e.element) ? "enter" : "leave");
              });
            })();
        }, 10));
    }
    var r,
      a = "data-am",
      i = "default",
      s = [];
    return (
      events.on(window, "scroll", n),
      events.on(window, "resize", n),
      function() {
        [].forEach.call(document.querySelectorAll("[" + a + "]"), function(t) {
          var n = {},
            r = {};
          [].forEach.call(t.attributes, function(e) {
            if (-1 !== e.name.indexOf(a)) {
              var t = e.name.replace(a + "-", ""),
                s = e.value;
              t === a && (t = i),
                (n = parser.getStates(n, t, s)),
                (r = parser.getTriggers(r, t, s));
            }
          }),
            s.push(
              Object.create(e).init({ element: t, states: n, triggers: r })
            );
        });
      }
    );
  })(am.sequencer, am.viewport));
